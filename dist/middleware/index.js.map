{"version":3,"sources":["../../src/middleware/index.js"],"names":["config","db","routes","get","req","res","params","id","err","row","send","all","rows","post","run","body","priority","subject","content","Date","now"],"mappings":";;;;;;AAAA;;kBAEe,gBAAoB;AAAA,KAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,KAATC,EAAS,QAATA,EAAS;;AAClC,KAAIC,SAAS,sBAAb;;AAEA;;AAEA;AACAA,QAAOC,GAAP,CAAW,WAAX,EAAwB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACrCJ,KAAGE,GAAH,CAAO,0DAAP,EAAmEC,IAAIE,MAAJ,CAAWC,EAA9E,EAAkF,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC/F,OAAGD,GAAH,EAAQ,MAAMA,GAAN;AACRH,OAAIK,IAAJ,CAASD,GAAT;AACA,GAHD;AAIA,EALD;;AAOA;AACAP,QAAOC,GAAP,CAAW,WAAX,EAAwB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACrCJ,KAAGU,GAAH,CAAO,6CAAP,EAAsD,UAACH,GAAD,EAAMI,IAAN,EAAe;AACpE,OAAGJ,GAAH,EAAQ,MAAMA,GAAN;AACRH,OAAIK,IAAJ,CAASE,IAAT;AACA,GAHD;AAIA,EALD;;AAOA;AACAV,QAAOW,IAAP,CAAY,WAAZ,EAAyB,UAACT,GAAD,EAAMC,GAAN,EAAc;AACtCJ,KAAGa,GAAH,CAAO,oFAAP,EAA6F,CAACV,IAAIW,IAAJ,CAASC,QAAV,EAAoBZ,IAAIW,IAAJ,CAASE,OAA7B,EAAsCb,IAAIW,IAAJ,CAASG,OAA/C,EAAwDC,KAAKC,GAAL,EAAxD,CAA7F,EAAkK,UAACZ,GAAD,EAAS;AAC1K,OAAGA,GAAH,EAAQ,MAAMA,GAAN;AACRH,OAAIK,IAAJ,CAAS,oBAAT;AACA,GAHD;AAIA,EALD;;AAOA;AACAR,QAAOW,IAAP,CAAY,kBAAZ,EAAgC,UAACT,GAAD,EAAMC,GAAN,EAAc;AAC7CJ,KAAGa,GAAH,CAAO,0EAAP,EAAmF,CAACV,IAAIW,IAAJ,CAASC,QAAV,EAAoBZ,IAAIW,IAAJ,CAASE,OAA7B,EAAsCb,IAAIW,IAAJ,CAASG,OAA/C,EAAwDC,KAAKC,GAAL,EAAxD,EAAoEhB,IAAIE,MAAJ,CAAWC,EAA/E,CAAnF,EAAuK,UAACC,GAAD,EAAS;AAC/K,OAAGA,GAAH,EAAQ,MAAMA,GAAN;AACRH,OAAIK,IAAJ,CAAS,sBAAT;AACA,GAHD;AAIA,EALD;;AAOA;;AAEA,QAAOR,MAAP;AACA,C","file":"index.js","sourcesContent":["import { Router } from 'express';\n\nexport default ({ config, db }) => {\n\tlet routes = Router();\n\n\t// add middleware here\n\n\t//VIEW TODO BY ID\n\troutes.get('/todo/:id', (req, res) => {\n\t\tdb.get(\"SELECT subject, content, priority FROM todo WHERE id = ?\", req.params.id, (err, row) => {\n\t\t\tif(err) throw err\n\t\t\tres.send(row);\n\t\t})\n\t})\n\n\t//VIEW ALL TODO\n\troutes.get('/todo-all', (req, res) => {\n\t\tdb.all(\"SELECT subject, content, priority FROM todo\", (err, rows) => {\n\t\t\tif(err) throw err\n\t\t\tres.send(rows);\n\t\t})\n\t})\n\n\t//ADD TODO\n\troutes.post('/todo-add', (req, res) => {\n\t\tdb.run(\"INSERT INTO todo(priority,subject,content,datestamp,userid) VALUES (?, ?, ?, ?, 0)\", [req.body.priority, req.body.subject, req.body.content, Date.now()], (err) => {\n\t\t\tif(err) throw err\n\t\t\tres.send(\"ADDED SUCCESSFULLY\")\n\t\t})\n\t})\n\n\t//UPDATE TODO\n\troutes.post('/todo-update/:id', (req, res) => {\n\t\tdb.run(\"UPDATE todo SET priority=?, subject=?, content=?, datestamp=? WHERE id=?\", [req.body.priority, req.body.subject, req.body.content, Date.now(), req.params.id], (err) => {\n\t\t\tif(err) throw err\n\t\t\tres.send(\"UPDATED SUCCESSFULLY\")\n\t\t})\n\t})\n\n\t//DELETE TODO\n\n\treturn routes;\n}\n"]}